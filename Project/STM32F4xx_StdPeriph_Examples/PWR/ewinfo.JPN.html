<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml11.xsd"
     xml:lang="en">
  <head>
    <title>Information Center for ARM</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <link type="text/css" rel="stylesheet" media="all" href="file://$TOOLKIT_DIR$/doc/infocenter/style/ewic.css" />
  </head>
  <body>
  <div id="topbanner"></div>
  <div id="titlebanner_small">
    <h2>Information Center for ARM</h2>
  </div>
  <div class="breadcrumb"><a href="$TOOLKIT_DIR$/doc/infocenter/index.JPN.html">Information Center for ARM</a> | EXAMPLES</div>
  <div class="mainblock">
   <h2>Example description</h2>

   <pre>  <!--Insert readme.txt-->
<span style="font-family: monospace;">
	PWR Brown Out Reset (BOR) example

	Example Description

This example shows how to configure the programmable BOR thresholds using the
FLASH option bytes.

By maintaining the Key push-button pressed at Reset, the new BOR level will be
programmed. To modify the BOR threshold, select the voltage range using the
appropriate line "#define BOR_LEVEL OB_BOR_XXXX" in main.c file.

LED1 is toggling to indicate that the reset is released and the system is in RUN
mode otherwise the BOR is maintaining the reset.


	Directory contents

  - PWR/PWR_BOR/stm32f4xx_conf.h    Library Configuration file
  - PWR/PWR_BOR/stm32f4xx_it.c      Interrupt handlers
  - PWR/PWR_BOR/stm32f4xx_it.h      Interrupt handlers header file
  - PWR/PWR_BOR/main.c              Main program
  - PWR/PWR_BOR/main.h              Header for main.c
  - PWR/PWR_BOR/system_stm32f4xx.c  STM32F4xx system source file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>

	Hardware and Software environment

  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x,
    STM32F429x/STM32F439x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices), STM32437I-EVAL (STM32F427x/STM32F437x Devices) and STM324x9I-EVAL
    (STM32F429x/STM32F439x Devices) evaluation boards and can be easily tailored to any
    other supported device and development board.

  - STM324xG-EVAL/STM32437I-EVAL Set-up
    - Use LED1 led connected to PG.06 pin
    - Use the Key push-button connected to pin PG15 (EXTI Line15)

  - STM324xG-EVAL/STM324x9I-EVAL Set-up
    - Use LED1 led connected to PG.06 pin
    - Use the Key push-button connected to pin PC13 (EXTI Line13)


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	PWR Current Consumption example

	Example Description

This example shows how to configure the STM32F4xx system to measure different
Low Power modes current consumption. The Low Power modes are:
  - Sleep Mode
  - STOP mode with RTC
  - STANDBY mode without RTC and BKPSRAM
  - STANDBY mode with RTC
  - STANDBY mode with RTC and BKPSRAM

To run this example, user has to follow the following steps:
 1. Select the Low power modes to be measured by uncommenting the corresponding
    line inside the stm32f4xx_lp_modes.h file.

       /*#define SLEEP_MODE*/
       /*#define STOP_MODE*/
       /*#define STANDBY_MODE*/
       #define STANDBY_RTC_MODE
       /*#define STANDBY_RTC_BKPSRAM_MODE*/

 2. Use an external amperemeter to measure the IDD current.

 3. This example can not be used in DEBUG mode,this is due to the fact that the
    Cortex-M4 core is no longer clocked during low power mode so debugging
    features are disbaled

Here below a detailed description of the example code:


 1. After reset, the program waits for Key button connected to the PG.15 to be
    pressed to enter the selected low power mode.
     - When the RTC is not used in the low power mode configuration, press
       again the Key button to exit the low power mode.
     - When the RTC is used, the wakeup from low power mode is automatically
       generated by the RTC (after 4s).

 2. Low power modes description:

    - Sleep Mode
    ============
            - System Running at PLL (168MHz)
            - Flash 5 wait state
            - Instruction and Data caches ON
            - Prefetch OFF
            - Code running from Internal FLASH
            - All peripherals disabled.
            - Wakeup using EXTI Line (Key Button PG.15)

    - STOP Mode
    ===========
            - RTC Clocked by LSE or LSI
            - Regulator in LP mode
            - HSI, HSE OFF and LSI if not used as RTC Clock source
            - No IWDG
            - FLASH in deep power down mode
            - Automatic Wakeup using RTC clocked by LSE/LSI (after ~20s)

    - STANDBY Mode
    ==============
            - Backup SRAM and RTC OFF
            - IWDG and LSI OFF
            - Wakeup using WakeUp Pin (PA.00)

    - STANDBY Mode with RTC clocked by LSE/LSI
    ==========================================
            - RTC Clocked by LSE or LSI
            - IWDG OFF and LSI OFF  if not used as RTC Clock source
            - Backup SRAM OFF
            - Automatic Wakeup using RTC clocked by LSE/LSI (after ~20s)

    - STANDBY Mode with RTC clocked by LSE/LSI and BKPSRAM
    ======================================================
            - RTC Clocked by LSE or LSI
            - Backup SRAM ON
            - IWDG OFF
            - Automatic Wakeup using RTC clocked by LSE/LSI (after ~20s)


	Directory contents

  - PWR/PWR_CurrentConsumption/stm32f4xx_conf.h              Library Configuration file
  - PWR/PWR_CurrentConsumption/stm32f4xx_it.c                Interrupt handlers
  - PWR/PWR_CurrentConsumption/stm32f4xx_it.h                Interrupt handlers header file
  - PWR/PWR_CurrentConsumption/main.c                        Main program
  - PWR/PWR_CurrentConsumption/main.c                        Header file for main program
  - PWR/PWR_CurrentConsumption/system_stm32f4xx.c            STM32F4xx system source file
  - PWR/PWR_CurrentConsumption/stm32f4xx_lp_modes.c          STM32F4xx Low Power Modes source file
  - PWR/PWR_CurrentConsumption/stm32f4xx_lp_modes.h          STM32F4xx Low Power Modes header file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment

  - This example runs on STM32F40xx/41xx and STM32F427x/STM32F437x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL(STM32F40xx/41xx Devices)
    and STM32437I-EVAL (STM32F427x/437x Devices) evaluation boards and can be easily tailored
    to any other supported device and development board

  - STM324xG-EVAL/STM32437I-EVAL Set-up
    - Use LED1 connected  to PG.06 pin.
    - Use Key Button connected to PG.15 pin.
    - Make sure that JP31 is opened.
    - Connect an amperemeter to JP32 to measure the IDD current


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Add the file stm32f4xx_lp_modes.c to the project source list
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	PWR Programmable Voltage Detector (PVD) example

	Example Description

This example shows how to configure the programmable voltage detector using
an external interrupt line. In this example, EXTI line 16 is configured to generate
an interrupt on each rising or falling edge of the PVD output signal (which
indicates that the Vdd voltage is below the PVD threshold).
In the interrupt routine a led connected to a specific GPIO pin is toggled every
time the voltage drops below or above the target threshold.

A LED connected to a specific GPIO pin is toggling to indicate that the system
is in RUN.

	Directory contents

  - PWR/PWR_PVD/stm32f4xx_conf.h    Library Configuration file
  - PWR/PWR_PVD/stm32f4xx_it.c      Interrupt handlers
  - PWR/PWR_PVD/stm32f4xx_it.h      Interrupt handlers header file
  - PWR/PWR_PVD/main.c              Main program
  - PWR/PWR_PVD/main.h              Header for main.c
  - PWR/PWR_PVD/system_stm32f4xx.c  STM32F4xx system source file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment

  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x,
    STM32F429x/STM32F439x Devices.

  - HW Set-up
    - Connect a LED to PG.06 pin (will be referred to by LED1 in the example code)
    - Connect a LED to PG.07/ pin (will be referred to by LED2 in the example code)
     note This example can't run on the evaluation boards.

	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	PWR STANDBY example

	Example Description

This example shows how to enters the system to STANDBY mode and wake-up from this
mode using: external RESET, RTC Alarm A or WKUP pin.

In the associated software, the system clock is set to 168 MHz, an EXTI line
is configured to generate an interrupt on falling edge and the SysTick is programmed
to generate an interrupt each 250 ms. In the SysTick interrupt handler, the LED1 is
toggled, this is used to indicate whether the MCU is in STANDBY or RUN mode.

When a falling edge is detected on the EXTI line an interrupt is generated. In the
EXTI handler routine the RTC is configured to generate an Alarm event in 5 second
then the system enters STANDBY mode causing the LED1 to stop toggling.
A rising edge on WKUP pin or an external RESET will wake-up the system from
STANDBY. If within 5 second neither rising edge on WKUP pin nor external RESET
are generated, the RTC Alarm A will wake-up the system.

After wake-up from STANDBY mode, program execution restarts in the same way as after
a RESET, the RTC configuration (clock source, prescaler,...) is kept and LED1 restarts
toggling. As result there is no need to configure the RTC.

two leds LED1 and LED2 are used to monitor the system state as following:
 - LED2 ON: RTC configuration failed (system will go to an infinite loop)
 - LED1 toggling: system in RUN mode
 - LED1 off : system in STANDBY mode

These Steps are repeated in an infinite loop.

 note To measure the current consumption in STANDBY mode, please refer to
       	PWR_CurrentConsumption example.

 note This example can not be used in DEBUG mode, this is due to the fact
      that the Cortex-M4 core is no longer clocked during low power mode
      so debugging features are disbaled

	Directory contents

  - PWR/PWR_Standby/system_stm32f4xx.c   STM32F4xx system clock configuration file
  - PWR/PWR_Standby/stm32f4xx_conf.h     Library Configuration file
  - PWR/PWR_Standby/stm32f4xx_it.c       Interrupt handlers
  - PWR/PWR_Standby/stm32f4xx_it.h       Header for stm32f4xx_it.c
  - PWR/PWR_Standby/main.c               Main program
  - PWR/PWR_Standby/main.h               Header for main.c


 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment

  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x,
    STM32F429x/STM32F439x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices), STM32437I-EVAL (STM32F427x/STM32F437x Devices) and STM324x9I-EVAL
    (STM32F429x/STM32F439x Devices) evaluation boards and can be easily tailored to any
    other supported device and development board.

  - STM324xG-EVAL/STM32437I-EVAL Set-up
    - Use LED1 and LED2 connected to PG.06 and PG.08 pins
    - Use the Key push-button connected to pin PG15 (EXTI Line15)

  - STM324xG-EVAL/STM32439I-EVAL Set-up
    - Use LED1 and LED2 connected to PG.06 and PG.07 pins
    - Use the Key push-button connected to pin PC15 (EXTI Line15)

	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	PWR STOP

	Example Description

This example shows how to enters the system to STOP mode and wake-up from this
mode using RTC Wakeup Timer Event connected to EXTI Line 22.

In the associated software
  - the system clock is set to 168 MHz
  - the EXTI_Line15 is configured to generate interrupt on falling edge
  - the EXTI_Line22 connected internally to the RTC Wakeup event is configured
    to generate an interrupt on rising edge each 4s
  - the SysTick is programmed to generate an interrupt each 250 ms
In the SysTick interrupt handler, LED2 is toggled, this is used to indicate whether
the MCU is in STOP or RUN mode.

The system enters STOP mode and will wait for the RTC Wakeup event to be
generated each 4s, or Key push button is pressed.
 - If the RTC WakeUp event (EXTI_Line22) is the source of wakeup from STOP, LED1 is toggled.
 - If the Key button (EXTI_Line15) is the source of wakeup from STOP, LED4 is toggled.

This behavior is repeated in an infinite loop.

LEDs are used to monitor the system state as following:
 - LED2 toggling: system in RUN mode
 - LED1 toggled: system woken up from STOP using RTC WakeUp Interrupt
 - LED4 toggled: system woken up from STOP using EXTI_Line15 (KEY push button)

  note To measure the current consumption in STOP mode, please refer to
      	PWR_CurrentConsumption example.

  note This example can not be used in DEBUG mode, this is due to the fact
       that the Cortex-M4 core is no longer clocked during low power mode
       so debugging features are disbaled


	Directory contents

  - PWR/PWR_Stop/system_stm32f4xx.c   STM32F4xx system clock configuration file
  - PWR/PWR_Stop/stm32f4xx_conf.h     Library Configuration file
  - PWR/PWR_Stop/stm32f4xx_it.c       Interrupt handlers
  - PWR/PWR_Stop/stm32f4xx_it.h       Header for stm32f4xx_it.c
  - PWR/PWR_Stop/main.c               Main program
  - PWR/PWR_Stop/main.h               header file for main.c

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment

  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x,
    STM32F429x/STM32F439x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices), STM32437I-EVAL (STM32F427x/STM32F437x Devices) and STM324x9I-EVAL
    (STM32F429x/STM32F439x Devices) evaluation boards and can be easily tailored to any
    other supported device and development board.

  - STM324xG-EVAL/STM32437I-EVAL Set-up
    - Use LED1, LED2 and LED4 connected respectively to PG.06, PG.08 and PC.07 pins
    - Use the Key push-button connected to pin PG15 (EXTI_Line15)

  - STM324xG-EVAL/STM32439I-EVAL Set-up
    - Use LED1, LED2 and LED4 connected respectively to PG.06, PG.07 and PG.12 pins
    - Use the Key push-button connected to pin PC15 (EXTI_Line15)

	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example

</span>
  </pre>
  </div>
  </body>
</html>

