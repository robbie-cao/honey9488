<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml11.xsd"
     xml:lang="en">
  <head>
    <title>Information Center for ARM</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <link type="text/css" rel="stylesheet" media="all" href="file://$TOOLKIT_DIR$/doc/infocenter/style/ewic.css" />
  </head>
  <body>
  <div id="topbanner"></div>
  <div id="titlebanner_small">
    <h2>Information Center for ARM</h2>
  </div>
  <div class="breadcrumb"><a href="$TOOLKIT_DIR$/doc/infocenter/index.JPN.html">Information Center for ARM</a> | EXAMPLES</div>
  <div class="mainblock">
   <h2>Example description</h2>

   <pre>  <!--Insert readme.txt-->
<span style="font-family: monospace;">
	USART Hyperterminal

	Example Description

This example provides a description of how to use the EVAL_COM1 Transmit and Receive
interrupts to communicate with the hyperterminal.


First, the EVAL_COM1 sends the TxBuffer to the hyperterminal and still waiting for
a string from the hyperterminal that you must enter.
The string that you have entered is stored in the RxBuffer array. The receive
buffer have a RxBufferSize bytes as maximum (the reception is stopped when this
maximum receive value is reached).

The EVAL_COM1 is configured as follow:
    - BaudRate = 9600 baud
    - Word Length = 8 Bits (7 data bit + 1 parity bit)
    - Two Stop Bit
    - Odd parity
    - Hardware flow control disabled (RTS and CTS signals)
    - Receive and transmit enabled

 note When the parity is enabled, the computed parity is inserted at the MSB
position of the transmitted data.


	Directory contents

  - USART/USART_HyperTerminal/stm32f4xx_conf.h     Library Configuration file
  - USART/USART_HyperTerminal/stm32f4xx_it.h       Interrupt handlers header file
  - USART/USART_HyperTerminal/stm32f4xx_it.c       Interrupt handlers source file
  - USART/USART_HyperTerminal/main.c               Main program
  - USART/USART_HyperTerminal/system_stm32f4xx.c   STM32F4xx system source file
  - USART/USART_HyperTerminal/main.h               Main program header file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment
  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices) and STM32437I-EVAL (STM32F427x/STM32F437x Devices) evaluation
    boards and can be easily tailored to any other supported device and development
    board.

  - STM324xG-EVAL and STM32437I-EVAL Set-up
    - Connect a null-modem female/female RS232 cable between the DB9 connector
      CN16 (USART3) and PC serial port if you want to display data on the HyperTerminal.
       note Make sure that jumper JP22 is in position 1-2

  - Hyperterminal configuration:
    - Word Length = 7 Bits
    - Two Stop Bit
    - Odd parity
    - BaudRate = 9600 baud
    - flow control: None


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	USART Printf

	Example Description

This example shows how to retarget the C library printf function to the USART.
This implementation output the printf message on the Hyperterminal using USART3.

The USARTx is configured as follow:
    - BaudRate = 115200 baud
    - Word Length = 8 Bits
    - One Stop Bit
    - No parity
    - Hardware flow control disabled (RTS and CTS signals)
    - Receive and transmit enabled


	Directory contents

  - USART/USART_Printf/system_stm32f4xx.c   STM32F4xx system clock configuration file
  - USART/USART_Printf/stm32f4xx_conf.h     Library Configuration file
  - USART/USART_Printf/stm32f4xx_it.h       Interrupt handlers header file
  - USART/USART_Printf/stm32f4xx_it.c       Interrupt handlers
  - USART/USART_Printf/main.c               Main program
  - USART/USART_Printf/main.h               Main program header file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment
  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices) and STM32437I-EVAL (STM32F427x/STM32F437x Devices) evaluation
    boards and can be easily tailored to any other supported device and development
    board.

  - STM324xG-EVAL and STM32437I-EVAL Set-up
    - Connect a null-modem female/female RS232 cable between the DB9 connector
      CN16 (USART3) and PC serial port if you want to display data on the HyperTerminal.
       note Make sure that jumper JP22 is in position 1-2

  - Hyperterminal configuration:
    - Word Length = 8 Bits
    - One Stop Bit
    - No parity
    - BaudRate = 115200 baud
    - flow control: None


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	USART Communication Boards Data Exchange using DMA

	Example Description

This example provides a small application in which Tamper button is used
to trigger USART communications using DMA and though using USART firmware library.

- Hardware Description

To use this example, you need to load it on two STM32 boards (let's call them
BoardA and BoardB) then connect these two boards through USART lines and GND.
In the firmware example uncomment the dedicated line in the main.h file to use
the USART peripheral as STM32 Transmitter or as STM32 Receiver device.

*------------------------------------------------------------------------------*
|                BoardA                                  BoardB                |
|         ____________________                   ____________________          |
|        |                    |                 |                    |         |
|        |                    |                 |                    |         |
|        |     __________     |                 |     __________     |         |
|        |    |   USART  |____|TX_____________RX|____|   USART  |    |         |
|        |    |  Device1 |____|RX_____________TX|____|  Device2 |    |         |
|        |    |____TX____|    |                 |    |____RX____|    |         |
|        |                    |                 |                    |         |
|        |  O LD1             |                 |  O LD1             |         |
|        |  O LD2    Tamper   |                 |  O LD2    Tamper   |         |
|        |  O LD3        _    |                 |  O LD3        _    |         |
|        |  O LD4       |_|   |                 |  O LD4       |_|   |         |
|        |                    |                 |                    |         |
|        |             GND O--|-----------------|--O GND             |         |
|        |____________________|                 |____________________|         |
|                                                                              |
|                                                                              |
*------------------------------------------------------------------------------*

 note
- The connection between the pins should use a common Ground.

- Software Description

At Tamper button press, the USART Transmitter Board sends the TxBuffer to
the USART Receiver Board

  Received data correctness is signaled by LED lightening and though as follow:
 - LED2 is ON when the comparison result between source buffer and destination
   buffer is passed otherwise LED3 is ON.

In both boards, the data transfers is managed using the USART Tx/Rx channels DMA requests.

The SysTick is configured to generate interrupt each 10ms. A dedicated counter
inside the SysTick ISR is used to toggle the LD1 each 100ms indicating that the
firmware is running.
These operations can be repeated infinitely.

	Directory contents

  - USART/USART_TwoBoards/USART_DataExchangeDMA/stm32f4xx_conf.h    Library Configuration file
  - USART/USART_TwoBoards/USART_DataExchangeDMA/stm32f4xx_it.c      Interrupt handlers
  - USART/USART_TwoBoards/USART_DataExchangeDMA/stm32f4xx_it.h      Interrupt handlers header file
  - USART/USART_TwoBoards/USART_DataExchangeDMA/main.c              Main program
  - USART/USART_TwoBoards/USART_DataExchangeDMA/main.h              Main program header file
  - USART/USART_TwoBoards/USART_DataExchangeDMA/system_stm32f4xx.c  STM32F4xx system source file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls" tool.


	Hardware and Software environment
  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices) and STM32437I-EVAL (STM32F427x/STM32F437x Devices) evaluation
    boards and can be easily tailored to any other supported device and development
    board.

  - STM324xG-EVAL and STM32437I-EVAL Set-up
    - Use LED1, LED2 and LED3 connected respectively to PG.06, PG.08 and
      PI.09 pins
    - Use the Tamper button
    - Connect BoardA USART3 TX pin (PC.10) to BoardB USART3 RX pin (PC.11)
    - Connect BoardA USART3 RX pin (PC.11) to BoardB USART3 TX pin (PC.10)


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example


===============================================================================


	USART Communication Boards Data Exchange using Interrupt

	Example Description

This example provides a small application in which joystick buttons are used
to trigger USART communication using interrupts and though using USART firmware
library.

- Hardware Description

To use this example, you need to load it on two STM32 boards (let's call them
BoardA and BoardB) then connect these two boards through UART lines and GND.

*------------------------------------------------------------------------------*
|                 BoardA                                BoardB                 |
|         ____________________                   ____________________          |
|        |                    |                 |                    |         |
|        |                    |                 |                    |         |
|        |     __________     |                 |     __________     |         |
|        |    |   UART   |____|TX_____________RX|____|   UART   |    |         |
|        |    |  Device1 |____|RX_____________TX|____|  Device2 |    |         |
|        |    |__________|    |                 |    |__________|    |         |
|        |                    |                 |                    |         |
|        |  O LD1             |                 |  O LD1             |         |
|        |  O LD2    Tamper   |                 |  O LD2    Tamper   |         |
|        |  O LD3        _    |                 |  O LD3        _    |         |
|        |  O LD4       |_|   |                 |  O LD4       |_|   |         |
|        |                    |                 |                    |         |
|        |             GND O--|-----------------|--O GND             |         |
|        |____________________|                 |____________________|         |
|                                                                              |
|                                                                              |
*------------------------------------------------------------------------------*

 note
- The connection between the pins should use a common Ground.

- Software Description

At Tamper button press, the USART Transmitter Board sends the TxBuffer to
the USART Receiver Board

  Received data correctness is signaled by LED lightening and though as follow:
 - LED2 is ON when the comparison result between source buffer and destination
   buffer is passed otherwise LED3 is ON.

The steps described above can be also initiated and ensured by BoardB.

In both boards(BoardA or BoardB), the data transfers is managed using USARTx_IRQHandler
in stm32f4xx_it.c file.

The SysTick is configured to generate interrupt each 10ms. A dedicated counter
inside the SysTick ISR is used to toggle the LD1 each 100ms indicating that the
firmware is running.
These operations can be repeated infinitely.

	Directory contents

  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/stm32f4xx_conf.h    Library Configuration file
  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/stm32f4xx_it.c      Interrupt handlers
  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/stm32f4xx_it.h      Interrupt handlers header file
  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/main.c              Main program
  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/main.h              Main program header file
  - USART/USART_TwoBoards/USART_DataExchangeInterrupt/system_stm32f4xx.c  STM32F4xx system source file

 note The "system_stm32f4xx.c" is generated by an automatic clock configuration
      tool and can be easily customized to your own configuration.
      To select different clock setup, use the "STM32F4xx_Clock_Configuration_V1.1.0.xls"
      provided with the AN3988 package available on <a href="http://www.st.com">ST Website</a>


	Hardware and Software environment

	Hardware and Software environment
  - This example runs on STM32F40xx/STM32F41xx, STM32F427x/STM32F437x Devices.

  - This example has been tested with STMicroelectronics STM324xG-EVAL (STM32F40xx/
    STM32F41xx Devices) and STM32437I-EVAL (STM32F427x/STM32F437x Devices) evaluation
    boards and can be easily tailored to any other supported device and development
    board.

  - STM324xG-EVAL and STM32437I-EVAL Set-up
    - Use LED1, LED2 and LED3 connected respectively to PG.06, PG.08 and
      PI.09 pins
    - Use the Tamper button
    - Connect BoardA USART3 TX pin (PC.10) to BoardB USART3 RX pin (PC.11)
    - Connect BoardA USART3 RX pin (PC.11) to BoardB USART3 TX pin (PC.10)


	How to use it ?

In order to make the program work, you must do the following :
 - Copy all source files from this example folder to the template folder under
   Project\STM32F4xx_StdPeriph_Templates
 - Open your preferred toolchain
 - Rebuild all files and load your image into target memory
 - Run the example

</span>
  </pre>
  </div>
  </body>
</html>

